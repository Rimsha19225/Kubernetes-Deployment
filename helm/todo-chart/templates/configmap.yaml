apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "todo-app.fullname" . }}-config
  labels:
    {{- include "todo-app.labels" . | nindent 4 }}
    app: {{ include "todo-app.name" . }}
data:
  # Frontend configuration
  next-public-api-base-url: "http://{{ include "todo-app.fullname" . }}-backend:{{ .Values.backend.service.port }}"
  next-public-app-url: "http://{{ include "todo-app.fullname" . }}-frontend:{{ .Values.frontend.service.port }}"

  # Backend configuration
  app-name: {{ .Values.config.appName | quote }}
  debug: {{ .Values.config.debug | quote }}
  environment: {{ .Values.config.environment | quote }}
  db-echo: "false"
  access-token-expire-minutes: "15"
  algorithm: "HS256"
  better-auth-url: {{ printf "http://%s-frontend:%d" (include "todo-app.fullname" .) .Values.frontend.service.port | quote }}
  log-level: {{ .Values.config.logLevel | quote }}
  log-file: {{ .Values.config.logFile | quote }}
  allowed-origins: {{ printf "http://%s-frontend:%d" (include "todo-app.fullname" .) .Values.frontend.service.port | quote }}
  backend-url: {{ printf "http://%s-backend:%d" (include "todo-app.fullname" .) .Values.backend.service.port | quote }}
  frontend-url: {{ printf "http://%s-frontend:%d" (include "todo-app.fullname" .) .Values.frontend.service.port | quote }}